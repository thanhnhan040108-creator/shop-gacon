<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Login</title>
  <link rel="stylesheet" href="/app.css" />
</head>
<body>
  <div class="container">
    <div class="nav">
      <div class="brand">
        <div class="logo"></div>
        <h1>ADMIN</h1>
      </div>
      <div class="right">
        <a class="pill" href="/">User</a>
      </div>
    </div>

    <div class="card auth-card" style="margin-top:14px">
      <div class="auth-head">
        <div>
          <h2 style="margin:0 0 6px">ÄÄƒng nháº­p Admin</h2>
          <div class="muted">Chá»‰ admin biáº¿t tÃ i khoáº£n. Náº¿u báº¡n deploy trÃªn Render, nÃªn Ä‘áº·t ADMIN_USER/ADMIN_PASS Ä‘á»ƒ báº£o máº­t.</div>
        </div>
        <a class="pill" href="https://www.facebook.com/share/1ajgzqUGdh/" target="_blank" rel="noopener">Há»— trá»£</a>
      </div>

      <div class="row" style="align-items:flex-end">
        <div style="flex:1; min-width:220px">
          <label class="label">Admin user</label>
          <input id="aUser" placeholder="Admin user" autocomplete="username" />
        </div>
        <div style="flex:1; min-width:220px">
          <label class="label">Admin pass</label>
          <div class="pass-wrap">
            <input id="aPass" type="password" placeholder="Admin pass" autocomplete="current-password" />
            <button class="icon-btn" id="toggleAdminPass" type="button" title="Hiá»‡n/áº©n máº­t kháº©u">ğŸ‘</button>
          </div>
        </div>
        <button id="btnAdminLogin" class="btn-primary">ÄÄƒng nháº­p</button>
      </div>

      <div id="msg" class="note" style="display:none"></div>

      <div class="hr"></div>
      <div class="muted" style="font-size:13px">
        Gá»£i Ã½ báº£o máº­t: Ä‘á»•i ADMIN_PASS máº¡nh, khÃ´ng chia sáº». Náº¿u quÃªn, báº¡n cÃ³ thá»ƒ Ä‘á»•i trong Render â†’ Environment â†’ redeploy.
      </div>
    </div>
  </div>

<script>
function show(text){
  msg.style.display = "block";
  msg.innerText = text;
}

toggleAdminPass.onclick = () => { aPass.type = (aPass.type === 'password') ? 'text' : 'password'; };

btnAdminLogin.onclick = async () => {
  const adminUser = aUser.value.trim();
  const adminPass = aPass.value.trim();

  const r = await fetch("/api/admin/summary", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({ adminUser, adminPass })
  });
  const d = await r.json();
  if(!d.ok) return show("Sai admin");

  localStorage.setItem("adminUser", adminUser);
  localStorage.setItem("adminPass", adminPass);
  location.href = "/admin-dashboard.html";
};
</script>
</body>
</html>
