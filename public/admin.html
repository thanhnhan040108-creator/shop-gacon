<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Login</title>
  <link rel="stylesheet" href="/app.css" />
</head>
<body>
  <div class="container">
    <div class="nav">
      <div class="brand">
        <div class="logo"></div>
        <h1>ADMIN</h1>
      </div>
      <div class="right">
        <a class="pill" href="/">User</a>
      </div>
    </div>

    <div class="card" style="margin-top:14px">
      <h2>Đăng nhập Admin</h2>
      <div class="muted">Tài khoản admin lấy từ Render Environment Variables.</div>

      <div class="row">
        <input id="aUser" placeholder="Admin user" />
        <input id="aPass" type="password" placeholder="Admin pass" />
        <button id="btnAdminLogin">Đăng nhập</button>
      </div>

      <div id="msg" class="note" style="display:none"></div>
    </div>
  </div>

<script>
function show(html){
  const el = document.getElementById("msg");
  el.style.display = "block";
  el.innerHTML = html;
}
document.getElementById("btnAdminLogin").onclick = async () => {
  const adminUser = document.getElementById("aUser").value.trim();
  const adminPass = document.getElementById("aPass").value.trim();

  // test gọi summary
  const r = await fetch("/api/admin/summary", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({ adminUser, adminPass })
  });
  const data = await r.json();
  if(!data.ok) return show("❌ Sai admin");
  localStorage.setItem("adminUser", adminUser);
  localStorage.setItem("adminPass", adminPass);
  location.href = "/admin-dashboard.html";
};
</script>
</body>
</html>
