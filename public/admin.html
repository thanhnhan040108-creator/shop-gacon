<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Login - Shop Gà Con</title>
  <link rel="stylesheet" href="app.css" />
</head>
<body class="center">
  <div class="card card-lg">
    <div class="brand">
      <div class="logo">AD</div>
      <div>
        <h2>Admin</h2>
        <div class="muted">Đăng nhập để quản lý đơn & nạp</div>
      </div>
    </div>

    <label>Tài khoản admin</label>
    <input id="a_user" placeholder="ADMIN_USER" />

    <label>Mật khẩu admin</label>
    <input id="a_pass" type="password" placeholder="ADMIN_PASS" />

    <button class="btn" onclick="adminLogin()">Đăng nhập</button>
    <div id="msg" class="msg"></div>

    <div class="hint">Quay lại <a href="index.html">User login</a></div>
  </div>

<script>
async function adminLogin(){
  msg.textContent = "";
  try{
    const r = await fetch("/api/admin/login",{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ user: a_user.value, pass: a_pass.value })
    });
    const d = await r.json();
    if(!r.ok) throw new Error(d.msg || "Sai admin");
    localStorage.setItem("adminToken", d.token);
    location.href = "admin-dashboard.html";
  }catch(e){
    msg.textContent = e.message;
  }
}
</script>
</body>
</html>
